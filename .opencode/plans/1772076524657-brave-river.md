# Plan: Move All Test Files to Standard Go Project Structure

## Current State
- 24 test files (`*_test.go`) are located in `amps/` directory alongside production code
- Tests are in package `amps` (same as production code) using internal APIs
- Internal subdirectories (e.g., `internal/wal/`, `internal/bookmark/`) already have their tests co-located

## Challenge
Many test files use unexported identifiers (internal fields, functions). Moving to external test package (`amps_test`) would break compilation.

## Solution: Use Subdirectory with Same Package
The practical standard Go approach:
1. Create `amps/tests/` directory
2. Keep tests in `package amps` (not `amps_test`) - this preserves access to unexported identifiers
3. Move all test files to this subdirectory

This maintains the spirit of separating tests from production code while preserving functionality.

## Implementation Plan

### Step 1: Create `amps/tests/` directory

### Step 2: Move All Test Files (24 files)
Move all `*_test.go` files from `amps/` root to `amps/tests/`:

```
amps/client_ack_test.go
amps/client_core_coverage_test.go
amps/client_parity_api_test.go
amps/client_parity_hardening_test.go
amps/client_routing_test.go
amps/command_coverage_test.go
amps/command_parity_test.go
amps/cpp_full_parity_api_test.go
amps/ha_client_test.go
amps/header_hotpath_test.go
amps/header_message_coverage_test.go
amps/integration_test.go
amps/message_stream_behavior_test.go
amps/message_stream_coverage_test.go
amps/mmap_io_unix_test.go
amps/perf_benchmark_test.go
amps/publish_store_test.go
amps/pure_helpers_coverage_test.go
amps/pure_parsers_router_coverage_test.go
amps/reconnect_strategy_test.go
amps/server_chooser_test.go
amps/subscription_manager_test.go
amps/test_helpers_test.go
amps/bookmark_store_test.go
```

### Step 3: Keep Package Declaration
All moved files retain `package amps` to maintain access to unexported identifiers.

### Makefile Updates
No changes needed - `go test ./amps/...` will still find tests in subdirectories.

## Verification
Run: `make test` to verify all tests pass after reorganization
